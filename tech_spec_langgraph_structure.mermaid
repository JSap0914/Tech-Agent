graph TB
    START([ğŸš€ ì‹œì‘<br/>ë””ìì¸ ì™„ë£Œ]) --> LOAD[1ï¸âƒ£ load_inputs<br/>ğŸ“¥ PRD/ë””ìì¸ ë¡œë“œ<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì…ë ¥: project_id<br/>ì¶œë ¥: prd_content,<br/>design_docs]
    
    LOAD --> ANALYZE[2ï¸âƒ£ analyze_completeness<br/>ğŸ” ê¸°íš ì™„ì „ì„± ë¶„ì„<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì…ë ¥: PRD, ë””ìì¸<br/>ì¶œë ¥: completeness_score<br/>0-100ì ]
    
    ANALYZE --> CHECK_SCORE{â“ ì™„ì „ì„±<br/>ì ìˆ˜ >= 80?}
    
    CHECK_SCORE -->|âŒ No<br/>ì ìˆ˜ ë‚®ìŒ| ASK_USER[2-1ï¸âƒ£ ask_user_clarification<br/>ğŸ’­ ì‚¬ìš©ì ì§ˆë¬¸<br/>â”â”â”â”â”â”â”â”â”â”<br/>ëˆ„ë½ëœ ìš”ì†Œ í™•ì¸<br/>ëª¨í˜¸í•œ ë¶€ë¶„ ëª…í™•í™”]
    
    CHECK_SCORE -->|âœ… Yes<br/>ì ìˆ˜ ì–‘í˜¸| IDENTIFY
    
    ASK_USER -->|ë‹µë³€ ë°˜ì˜| ANALYZE
    
    IDENTIFY[3ï¸âƒ£ identify_tech_gaps<br/>ğŸ” ê¸°ìˆ  Gap íƒì§€<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì…ë ¥: PRD, TRD<br/>ì¶œë ¥: technical_gaps<br/>ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜]
    
    IDENTIFY --> HAS_GAPS{â“ ê¸°ìˆ  Gap<br/>ì¡´ì¬?}
    
    HAS_GAPS -->|âŒ No<br/>Gap ì—†ìŒ| PARSE_CODE
    
    HAS_GAPS -->|âœ… Yes<br/>ê²°ì • í•„ìš”| RESEARCH[4ï¸âƒ£ research_technologies<br/>ğŸŒ ì˜¤í”ˆì†ŒìŠ¤ ì›¹ ê²€ìƒ‰<br/>â”â”â”â”â”â”â”â”â”â”<br/>web_search ë„êµ¬ ì‚¬ìš©<br/>ìƒìœ„ 5ê°œ í›„ë³´ ì¶”ì¶œ<br/>ìƒì„¸ ì¡°ì‚¬: GitHub stats,<br/>pros/cons, use cases]
    
    RESEARCH --> PRESENT[5ï¸âƒ£ present_options<br/>ğŸ“Š ì„ íƒì§€ 3ê°œ ì œì‹œ<br/>â”â”â”â”â”â”â”â”â”â”<br/>ë¹„êµ í‘œ ìƒì„±<br/>AI ì¶”ì²œ í¬í•¨<br/>ë¹„ê°œë°œì ì¹œí™”ì ]
    
    PRESENT --> WAIT[6ï¸âƒ£ wait_user_decision<br/>â³ ì‚¬ìš©ì ì„ íƒ ëŒ€ê¸°<br/>â”â”â”â”â”â”â”â”â”â”<br/>WebSocket ì…ë ¥ ëŒ€ê¸°<br/>ì˜µì…˜ 1/2/3 ì„ íƒ<br/>ë˜ëŠ” 'AI ì¶”ì²œ']
    
    WAIT --> VALIDATE_DECISION[7ï¸âƒ£ validate_decision<br/>âœ… ì„ íƒ ê²€ì¦<br/>â”â”â”â”â”â”â”â”â”â”<br/>PRD ìš”êµ¬ì‚¬í•­ í˜¸í™˜ì„±<br/>ë‹¤ë¥¸ ê¸°ìˆ ê³¼ ì¶©ëŒ ì²´í¬<br/>ê²€ì¦ ì ìˆ˜ ì‚°ì •]
    
    VALIDATE_DECISION --> HAS_CONFLICT{â“ ì¶©ëŒ<br/>ìˆìŒ?}
    
    HAS_CONFLICT -->|âš ï¸ Yes<br/>ë¬¸ì œ ë°œê²¬| WARN[7-1ï¸âƒ£ warn_user<br/>âš ï¸ ê²½ê³  í‘œì‹œ<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì¶©ëŒ ë‚´ìš© ì„¤ëª…<br/>ì‹¬ê°ë„ í‘œì‹œ<br/>ì¬ì„ íƒ or ê³„ì†]
    
    HAS_CONFLICT -->|âœ… No<br/>ë¬¸ì œ ì—†ìŒ| MORE_GAPS
    
    WARN --> USER_CONFIRM{â“ ì‚¬ìš©ì<br/>ê²°ì •?}
    
    USER_CONFIRM -->|ğŸ”„ ì¬ì„ íƒ| PRESENT
    USER_CONFIRM -->|â¡ï¸ ê³„ì†| MORE_GAPS
    
    MORE_GAPS{â“ ë‚¨ì€<br/>ê²°ì • ìˆìŒ?}
    
    MORE_GAPS -->|âœ… Yes<br/>ë” ìˆìŒ| RESEARCH
    MORE_GAPS -->|âŒ No<br/>ì™„ë£Œ| PARSE_CODE[8ï¸âƒ£ parse_ai_studio_code<br/>ğŸ’» Google AI Studio ì½”ë“œ ë¶„ì„<br/>â”â”â”â”â”â”â”â”â”â”<br/>ZIP ì••ì¶• í•´ì œ<br/>React ì»´í¬ë„ŒíŠ¸ íŒŒì‹±<br/>Props, State, API í˜¸ì¶œ ì¶”ì¶œ]
    
    PARSE_CODE --> INFER_API[9ï¸âƒ£ infer_api_spec<br/>ğŸ”® API ëª…ì„¸ ì¶”ë¡ <br/>â”â”â”â”â”â”â”â”â”â”<br/>ì»´í¬ë„ŒíŠ¸ â†’ API ë§¤í•‘<br/>fetch/axios í˜¸ì¶œ ë¶„ì„<br/>ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ ìƒì„±]
    
    INFER_API --> GEN_TRD[ğŸ”Ÿ generate_trd<br/>ğŸ“ TRD ìƒì„±<br/>â”â”â”â”â”â”â”â”â”â”<br/>ëª¨ë“  ì •ë³´ ì¢…í•©<br/>Markdown í˜•ì‹<br/>8ê°œ ì„¹ì…˜ êµ¬ì¡°í™”]
    
    GEN_TRD --> VALIDATE_TRD[1ï¸âƒ£1ï¸âƒ£ validate_trd<br/>âœ”ï¸ TRD ê²€ì¦<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì™„ì „ì„± ì²´í¬<br/>ì¼ê´€ì„± ì²´í¬<br/>í’ˆì§ˆ ì ìˆ˜ ì‚°ì •]
    
    VALIDATE_TRD --> TRD_VALID{â“ TRD<br/>í’ˆì§ˆ >= 90?}
    
    TRD_VALID -->|âŒ No<br/>ì¬ìƒì„±<br/>ìµœëŒ€ 3íšŒ| GEN_TRD
    TRD_VALID -->|âœ… Yes<br/>í†µê³¼| GEN_API[1ï¸âƒ£2ï¸âƒ£ generate_api_spec<br/>ğŸ“„ API ëª…ì„¸ì„œ ìƒì„±<br/>â”â”â”â”â”â”â”â”â”â”<br/>OpenAPI 3.0 í˜•ì‹<br/>ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸<br/>ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ]
    
    GEN_API --> GEN_DB[1ï¸âƒ£3ï¸âƒ£ generate_db_schema<br/>ğŸ—„ï¸ DB ìŠ¤í‚¤ë§ˆ ìƒì„±<br/>â”â”â”â”â”â”â”â”â”â”<br/>SQL DDL ë¬¸<br/>í…Œì´ë¸”, ì¸ë±ìŠ¤, ì œì•½<br/>ERD Mermaid]
    
    GEN_DB --> GEN_ARCH[1ï¸âƒ£4ï¸âƒ£ generate_architecture<br/>ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì‹œìŠ¤í…œ êµ¬ì„±ë„<br/>ë°ì´í„° íë¦„<br/>Mermaid í˜•ì‹]
    
    GEN_ARCH --> GEN_TECH_STACK[1ï¸âƒ£5ï¸âƒ£ generate_tech_stack_doc<br/>ğŸ“š ê¸°ìˆ  ìŠ¤íƒ ë¬¸ì„œ<br/>â”â”â”â”â”â”â”â”â”â”<br/>ê° ê¸°ìˆ  ì„ íƒ ì´ìœ <br/>ì„¤ì • ê°€ì´ë“œ<br/>í•™ìŠµ ë¦¬ì†ŒìŠ¤]
    
    GEN_TECH_STACK --> SAVE[1ï¸âƒ£6ï¸âƒ£ save_to_db<br/>ğŸ’¾ DB ì €ì¥<br/>â”â”â”â”â”â”â”â”â”â”<br/>5ì¢… ë¬¸ì„œ ì €ì¥<br/>generated_trd_documents<br/>ANYON documents ë³µì‚¬]
    
    SAVE --> NOTIFY[1ï¸âƒ£7ï¸âƒ£ notify_next_agent<br/>ğŸ”” ë°±ë¡œê·¸ Agent íŠ¸ë¦¬ê±°<br/>â”â”â”â”â”â”â”â”â”â”<br/>ì´ë²¤íŠ¸ ë°œí–‰<br/>ì¹¸ë°˜ë³´ë“œ ìƒíƒœ ë³€ê²½<br/>ì™„ë£Œ ë©”ì‹œì§€]
    
    NOTIFY --> END([âœ¨ ì™„ë£Œ<br/>ë°±ë¡œê·¸ ë‹¨ê³„ë¡œ])
    
    style START fill:#c8e6c9,stroke:#4caf50,stroke-width:3px
    style END fill:#c8e6c9,stroke:#4caf50,stroke-width:3px
    
    style CHECK_SCORE fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style HAS_GAPS fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style HAS_CONFLICT fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style MORE_GAPS fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style TRD_VALID fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style USER_CONFIRM fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    
    style LOAD fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style ANALYZE fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style ASK_USER fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    style IDENTIFY fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    
    style RESEARCH fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style PRESENT fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style WAIT fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style VALIDATE_DECISION fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    style WARN fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    
    style PARSE_CODE fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    style INFER_API fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    
    style GEN_TRD fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style VALIDATE_TRD fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style GEN_API fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style GEN_DB fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style GEN_ARCH fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    style GEN_TECH_STACK fill:#e8f5e9,stroke:#4caf50,stroke-width:2px
    
    style SAVE fill:#ffebee,stroke:#f44336,stroke-width:2px
    style NOTIFY fill:#ffebee,stroke:#f44336,stroke-width:2px
