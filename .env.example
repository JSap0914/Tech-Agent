# =============================================
# Tech Spec Agent - Environment Configuration
# =============================================

# ============= Database =============
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/anyon_db
# For synchronous operations (Alembic migrations)
DATABASE_URL_SYNC=postgresql://postgres:password@localhost:5432/anyon_db

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============= LLM APIs =============
# Anthropic (Claude Sonnet 4 for document generation)
ANTHROPIC_API_KEY=sk-ant-api03-your-key-here

# OpenAI (For Google AI Studio integration)
OPENAI_API_KEY=sk-your-key-here
OPENAI_ORG_ID=org-your-org-here

# ============= External Services =============
# Redis (Caching)
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# Tavily (Web search for technology research)
TAVILY_API_KEY=tvly-your-key-here

# ============= Tech Spec Agent Configuration =============
# Session Settings
TECH_SPEC_SESSION_TIMEOUT=3600
TECH_SPEC_MAX_RETRIES=3
TECH_SPEC_MAX_ITERATIONS=3

# Technology Research Settings
TECH_SPEC_WEB_SEARCH_TIMEOUT=30
TECH_SPEC_MIN_OPTIONS_PER_GAP=2
TECH_SPEC_MAX_OPTIONS_PER_GAP=3
TECH_SPEC_CACHE_TTL=86400  # 24 hours in seconds

# Document Generation Settings
TECH_SPEC_TRD_VALIDATION_THRESHOLD=90
TECH_SPEC_MAX_TRD_GENERATION_RETRIES=2

# Code Parsing Settings
TECH_SPEC_MAX_COMPONENTS_TO_PARSE=100
TECH_SPEC_PARSE_TIMEOUT=10

# ============= ANYON Platform Integration =============
ANYON_API_BASE_URL=https://anyon.platform/api
ANYON_WEBHOOK_SECRET=your-webhook-secret-here
ANYON_FRONTEND_URL=https://anyon.platform

# ============= Security =============
# JWT Settings
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# CORS Settings
CORS_ALLOWED_ORIGINS=https://anyon.platform,http://localhost:3000
CORS_ALLOW_CREDENTIALS=true

# ============= Monitoring & Logging =============
# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json
STRUCTLOG_ENABLED=true

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# LangSmith (LangChain tracing)
LANGSMITH_ENABLED=false
LANGSMITH_API_KEY=ls_your-key-here
LANGSMITH_PROJECT=tech-spec-agent

# ============= Feature Flags =============
ENABLE_RATE_LIMITING=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_GLOBAL_PER_MINUTE=1000
RATE_LIMIT_GLOBAL_REQUESTS=1000
RATE_LIMIT_WINDOW_SECONDS=60

ENABLE_CACHING=true
ENABLE_WEB_SEARCH=true
ENABLE_ERROR_RECOVERY=true

# ============= WebSocket Configuration =============
WEBSOCKET_BASE_URL=wss://anyon.platform

# ============= Development Settings =============
# Environment
ENVIRONMENT=development  # development, staging, production

# Debug
DEBUG=false
RELOAD=true  # Auto-reload on code changes (dev only)

# Testing
TESTING=false
TEST_DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/anyon_test_db

# ============= Docker Settings (if using Docker) =============
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=anyon_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

REDIS_HOST=redis
REDIS_PORT=6379
