graph LR
    subgraph Phase1["ğŸ”µ Phase 1: ì…ë ¥ ë° ë¶„ì„<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ì§„í–‰ë¥ : 0% â†’ 25%<br/>ì†Œìš” ì‹œê°„: 2-3ë¶„"]
        N1["1ï¸âƒ£ load_inputs<br/>PRD/ë””ìì¸ ë¡œë“œ"]
        N2["2ï¸âƒ£ analyze_completeness<br/>ì™„ì „ì„± ë¶„ì„<br/>0-100ì "]
        N2_1["2-1ï¸âƒ£ ask_clarification<br/>ì‚¬ìš©ì ì§ˆë¬¸<br/>(í•„ìš”ì‹œ)"]
        N3["3ï¸âƒ£ identify_tech_gaps<br/>ê¸°ìˆ  Gap íƒì§€"]
        
        N1 --> N2
        N2 --> N2_1
        N2_1 --> N2
        N2 --> N3
    end
    
    subgraph Phase2["ğŸŸ  Phase 2: ê¸°ìˆ  ì¡°ì‚¬ ë° ì„ íƒ<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ì§„í–‰ë¥ : 25% â†’ 50%<br/>ì†Œìš” ì‹œê°„: 10-20ë¶„<br/>âš ï¸ Gap ê°œìˆ˜ì— ë”°ë¼ ë°˜ë³µ"]
        N4["4ï¸âƒ£ research_technologies<br/>ì›¹ ê²€ìƒ‰<br/>ì˜¤í”ˆì†ŒìŠ¤ ì¡°ì‚¬"]
        N5["5ï¸âƒ£ present_options<br/>3ê°€ì§€ ì˜µì…˜ ì œì‹œ<br/>ë¹„êµ í‘œ ìƒì„±"]
        N6["6ï¸âƒ£ wait_user_decision<br/>ì‚¬ìš©ì ì„ íƒ ëŒ€ê¸°<br/>WebSocket"]
        N7["7ï¸âƒ£ validate_decision<br/>ì„ íƒ ê²€ì¦<br/>ì¶©ëŒ ì²´í¬"]
        N7_1["7-1ï¸âƒ£ warn_user<br/>ê²½ê³  í‘œì‹œ<br/>(ì¶©ëŒì‹œ)"]
        
        N4 --> N5
        N5 --> N6
        N6 --> N7
        N7 --> N7_1
        N7_1 --> N5
        N7 --> N4
    end
    
    subgraph Phase3["ğŸŸ£ Phase 3: ì½”ë“œ ë¶„ì„<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ì§„í–‰ë¥ : 50% â†’ 65%<br/>ì†Œìš” ì‹œê°„: 2-3ë¶„"]
        N8["8ï¸âƒ£ parse_ai_studio_code<br/>Google AI Studio<br/>ì½”ë“œ íŒŒì‹±"]
        N9["9ï¸âƒ£ infer_api_spec<br/>API ëª…ì„¸ ì¶”ë¡ <br/>ì»´í¬ë„ŒíŠ¸ ë¶„ì„"]
        
        N8 --> N9
    end
    
    subgraph Phase4["ğŸŸ¢ Phase 4: ë¬¸ì„œ ìƒì„±<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ì§„í–‰ë¥ : 65% â†’ 100%<br/>ì†Œìš” ì‹œê°„: 3-5ë¶„"]
        N10["ğŸ”Ÿ generate_trd<br/>TRD ìƒì„±<br/>Markdown"]
        N11["1ï¸âƒ£1ï¸âƒ£ validate_trd<br/>í’ˆì§ˆ ê²€ì¦<br/>90ì  ì´ìƒ"]
        N12["1ï¸âƒ£2ï¸âƒ£ generate_api_spec<br/>API ëª…ì„¸ì„œ<br/>OpenAPI YAML"]
        N13["1ï¸âƒ£3ï¸âƒ£ generate_db_schema<br/>DB ìŠ¤í‚¤ë§ˆ<br/>SQL DDL"]
        N14["1ï¸âƒ£4ï¸âƒ£ generate_architecture<br/>ì•„í‚¤í…ì²˜<br/>Mermaid"]
        N15["1ï¸âƒ£5ï¸âƒ£ generate_tech_stack<br/>ê¸°ìˆ  ìŠ¤íƒ ë¬¸ì„œ<br/>Markdown"]
        N16["1ï¸âƒ£6ï¸âƒ£ save_to_db<br/>PostgreSQL ì €ì¥<br/>5ì¢… ë¬¸ì„œ"]
        N17["1ï¸âƒ£7ï¸âƒ£ notify_next_agent<br/>ë°±ë¡œê·¸ Agent<br/>íŠ¸ë¦¬ê±°"]
        
        N10 --> N11
        N11 --> N10
        N11 --> N12
        N12 --> N13
        N13 --> N14
        N14 --> N15
        N15 --> N16
        N16 --> N17
    end
    
    Phase1 ==>|ì™„ì „ì„± ì–‘í˜¸<br/>Gap ë°œê²¬| Phase2
    Phase2 ==>|ëª¨ë“  ê¸°ìˆ  ì„ íƒ ì™„ë£Œ| Phase3
    Phase3 ==>|API ì¶”ë¡  ì™„ë£Œ| Phase4
    
    style Phase1 fill:#e3f2fd,stroke:#2196f3,stroke-width:3px
    style Phase2 fill:#fff3e0,stroke:#ff9800,stroke-width:3px
    style Phase3 fill:#f3e5f5,stroke:#9c27b0,stroke-width:3px
    style Phase4 fill:#e8f5e9,stroke:#4caf50,stroke-width:3px
    
    style N1 fill:#bbdefb,stroke:#1976d2
    style N2 fill:#bbdefb,stroke:#1976d2
    style N2_1 fill:#bbdefb,stroke:#1976d2
    style N3 fill:#bbdefb,stroke:#1976d2
    
    style N4 fill:#ffe0b2,stroke:#f57c00
    style N5 fill:#ffe0b2,stroke:#f57c00
    style N6 fill:#ffe0b2,stroke:#f57c00
    style N7 fill:#ffe0b2,stroke:#f57c00
    style N7_1 fill:#ffe0b2,stroke:#f57c00
    
    style N8 fill:#e1bee7,stroke:#7b1fa2
    style N9 fill:#e1bee7,stroke:#7b1fa2
    
    style N10 fill:#c8e6c9,stroke:#388e3c
    style N11 fill:#c8e6c9,stroke:#388e3c
    style N12 fill:#c8e6c9,stroke:#388e3c
    style N13 fill:#c8e6c9,stroke:#388e3c
    style N14 fill:#c8e6c9,stroke:#388e3c
    style N15 fill:#c8e6c9,stroke:#388e3c
    style N16 fill:#ffcdd2,stroke:#d32f2f
    style N17 fill:#ffcdd2,stroke:#d32f2f
